{"ast":null,"code":"import _slicedToArray from\"/Users/les/dev/movies-explorer-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import'./SearchForm.css';import FilterCheckbox from\"../FilterCheckbox/FilterCheckbox\";import{useLocation}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SearchForm=function SearchForm(_ref){var onSearchMovies=_ref.onSearchMovies,onFilter=_ref.onFilter,isShortMovies=_ref.isShortMovies;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isQueryError=_useState2[0],setIsQueryError=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),query=_useState4[0],setQuery=_useState4[1];var location=useLocation();function handleChangeQuery(e){setQuery(e.target.value);}function handleSubmit(e){e.preventDefault();if(query.trim().length===0){setIsQueryError(true);}else{setIsQueryError(false);onSearchMovies(query);}}useEffect(function(){if(location.pathname==='/movies'&&localStorage.getItem('movieSearch')){var localQuery=localStorage.getItem('movieSearch');setQuery(localQuery);}},[location]);return/*#__PURE__*/_jsx(\"section\",{className:'search',children:/*#__PURE__*/_jsxs(\"form\",{className:\"search__form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"search__bar\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"search__input\",id:\"search-input\",type:\"text\",placeholder:\"\\u0424\\u0438\\u043B\\u044C\\u043C\",required:true,onChange:handleChangeQuery,value:query||''}),/*#__PURE__*/_jsx(\"button\",{className:\"search__button\",onClick:onSearchMovies,type:\"submit\"})]}),/*#__PURE__*/_jsx(FilterCheckbox,{onFilter:onFilter,isShortMovies:isShortMovies}),isQueryError&&/*#__PURE__*/_jsx(\"span\",{className:\"search__form-error\",children:\"\\u041D\\u0443\\u0436\\u043D\\u043E \\u0432\\u0432\\u0435\\u0441\\u0442\\u0438 \\u043A\\u043B\\u044E\\u0447\\u0435\\u0432\\u043E\\u0435 \\u0441\\u043B\\u043E\\u0432\\u043E\"})]})});};export default SearchForm;","map":{"version":3,"names":["React","useState","useEffect","FilterCheckbox","useLocation","jsx","_jsx","jsxs","_jsxs","SearchForm","_ref","onSearchMovies","onFilter","isShortMovies","_useState","_useState2","_slicedToArray","isQueryError","setIsQueryError","_useState3","_useState4","query","setQuery","location","handleChangeQuery","e","target","value","handleSubmit","preventDefault","trim","length","pathname","localStorage","getItem","localQuery","className","children","onSubmit","id","type","placeholder","required","onChange","onClick"],"sources":["/Users/les/dev/movies-explorer-frontend/src/components/SearchForm/SearchForm.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './SearchForm.css'\nimport FilterCheckbox from \"../FilterCheckbox/FilterCheckbox\";\nimport { useLocation } from 'react-router-dom';\n\nconst SearchForm = ({ onSearchMovies, onFilter, isShortMovies }) => {\n    const [isQueryError, setIsQueryError] = useState(false);\n    const [query, setQuery] = useState('');\n    const location = useLocation();\n\n    function handleChangeQuery(e) {\n        setQuery(e.target.value);\n    }\n\n    function handleSubmit(e) {\n        e.preventDefault();\n        if (query.trim().length === 0) {\n            setIsQueryError(true);\n        } else {\n            setIsQueryError(false);\n            onSearchMovies(query);\n        }\n    }\n\n    useEffect(() => {\n        if (location.pathname === '/movies' && localStorage.getItem('movieSearch')) {\n            const localQuery = localStorage.getItem('movieSearch');\n            setQuery(localQuery);\n        }\n    }, [location]);\n\n    return(\n        <section className={'search'}>\n            <form className='search__form' onSubmit={handleSubmit}>\n                <div className='search__bar'>\n                    <input\n                        className='search__input'\n                        id='search-input'\n                        type='text'\n                        placeholder='Фильм'\n                        required={true}\n                        onChange={handleChangeQuery}\n                        value={query || ''}\n                    />\n                    <button className='search__button' onClick={onSearchMovies} type='submit'></button>\n                </div>\n                <FilterCheckbox onFilter={onFilter} isShortMovies={isShortMovies}/>\n                {isQueryError && <span className=\"search__form-error\">Нужно ввести ключевое слово</span>}\n            </form>\n        </section>\n    )\n}\n\nexport default SearchForm"],"mappings":"6HAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,kBAAkB,CACzB,MAAO,CAAAC,cAAc,KAAM,kCAAkC,CAC7D,OAASC,WAAW,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE/C,GAAM,CAAAC,UAAU,CAAG,QAAb,CAAAA,UAAUA,CAAAC,IAAA,CAAoD,IAA9C,CAAAC,cAAc,CAAAD,IAAA,CAAdC,cAAc,CAAEC,QAAQ,CAAAF,IAAA,CAARE,QAAQ,CAAEC,aAAa,CAAAH,IAAA,CAAbG,aAAa,CACzD,IAAAC,SAAA,CAAwCb,QAAQ,CAAC,KAAK,CAAC,CAAAc,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAhDG,YAAY,CAAAF,UAAA,IAAEG,eAAe,CAAAH,UAAA,IACpC,IAAAI,UAAA,CAA0BlB,QAAQ,CAAC,EAAE,CAAC,CAAAmB,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAA/BE,KAAK,CAAAD,UAAA,IAAEE,QAAQ,CAAAF,UAAA,IACtB,GAAM,CAAAG,QAAQ,CAAGnB,WAAW,CAAC,CAAC,CAE9B,QAAS,CAAAoB,iBAAiBA,CAACC,CAAC,CAAE,CAC1BH,QAAQ,CAACG,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CAC5B,CAEA,QAAS,CAAAC,YAAYA,CAACH,CAAC,CAAE,CACrBA,CAAC,CAACI,cAAc,CAAC,CAAC,CAClB,GAAIR,KAAK,CAACS,IAAI,CAAC,CAAC,CAACC,MAAM,GAAK,CAAC,CAAE,CAC3Bb,eAAe,CAAC,IAAI,CAAC,CACzB,CAAC,IAAM,CACHA,eAAe,CAAC,KAAK,CAAC,CACtBP,cAAc,CAACU,KAAK,CAAC,CACzB,CACJ,CAEAnB,SAAS,CAAC,UAAM,CACZ,GAAIqB,QAAQ,CAACS,QAAQ,GAAK,SAAS,EAAIC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC,CAAE,CACxE,GAAM,CAAAC,UAAU,CAAGF,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC,CACtDZ,QAAQ,CAACa,UAAU,CAAC,CACxB,CACJ,CAAC,CAAE,CAACZ,QAAQ,CAAC,CAAC,CAEd,mBACIjB,IAAA,YAAS8B,SAAS,CAAE,QAAS,CAAAC,QAAA,cACzB7B,KAAA,SAAM4B,SAAS,CAAC,cAAc,CAACE,QAAQ,CAAEV,YAAa,CAAAS,QAAA,eAClD7B,KAAA,QAAK4B,SAAS,CAAC,aAAa,CAAAC,QAAA,eACxB/B,IAAA,UACI8B,SAAS,CAAC,eAAe,CACzBG,EAAE,CAAC,cAAc,CACjBC,IAAI,CAAC,MAAM,CACXC,WAAW,CAAC,gCAAO,CACnBC,QAAQ,CAAE,IAAK,CACfC,QAAQ,CAAEnB,iBAAkB,CAC5BG,KAAK,CAAEN,KAAK,EAAI,EAAG,CACtB,CAAC,cACFf,IAAA,WAAQ8B,SAAS,CAAC,gBAAgB,CAACQ,OAAO,CAAEjC,cAAe,CAAC6B,IAAI,CAAC,QAAQ,CAAS,CAAC,EAClF,CAAC,cACNlC,IAAA,CAACH,cAAc,EAACS,QAAQ,CAAEA,QAAS,CAACC,aAAa,CAAEA,aAAc,CAAC,CAAC,CAClEI,YAAY,eAAIX,IAAA,SAAM8B,SAAS,CAAC,oBAAoB,CAAAC,QAAA,CAAC,qJAA2B,CAAM,CAAC,EACtF,CAAC,CACF,CAAC,CAElB,CAAC,CAED,cAAe,CAAA5B,UAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}