{"ast":null,"code":"import _slicedToArray from\"/Users/les/dev/movies-explorer-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import Preloader from\"../Preloader/Preloader\";import{Fragment}from\"react\";import{useLocation}from'react-router-dom';import MoviesCard from\"../MoviesCard/MoviesCard\";import'./MoviesCardList.css';import SearchError from'../SearchError/SearchError';import{MORE_MOVIES_DESKTOP,MORE_MOVIES_TABLET,MORE_MOVIES_MOBILE}from'../../utils/constants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MoviesCardList=function MoviesCardList(_ref){var cards=_ref.cards,isSavedFilms=_ref.isSavedFilms,isLoading=_ref.isLoading,isReqErr=_ref.isReqErr,isNotFound=_ref.isNotFound,handleLikeClick=_ref.handleLikeClick,savedMovies=_ref.savedMovies,onCardDelete=_ref.onCardDelete;/* const isLoading = false;*/var _useState=useState(0),_useState2=_slicedToArray(_useState,2),shownMovies=_useState2[0],setShownMovies=_useState2[1];var _useLocation=useLocation(),pathname=_useLocation.pathname;function shownCount(){var display=window.innerWidth;if(display>1180){setShownMovies(16);}else if(display>1023){setShownMovies(12);}else if(display>800){setShownMovies(8);}else if(display<800){setShownMovies(5);}}useEffect(function(){shownCount();},[]);useEffect(function(){setTimeout(function(){window.addEventListener('resize',shownCount);},500);});function showMore(){var display=window.innerWidth;if(display>1180){setShownMovies(shownMovies+MORE_MOVIES_DESKTOP);}else if(display>1023){setShownMovies(shownMovies+MORE_MOVIES_TABLET);}else if(display<1023){setShownMovies(shownMovies+MORE_MOVIES_MOBILE);}}function getSavedMovieCard(savedMovies,card){return savedMovies.find(function(savedMovie){return savedMovie.movieId===card.id;});}return/*#__PURE__*/_jsxs(\"section\",{className:\"cards\",children:[isLoading&&/*#__PURE__*/_jsx(Preloader,{}),isNotFound&&!isLoading&&/*#__PURE__*/_jsx(SearchError,{errorText:'Ничего не найдено'}),isReqErr&&!isLoading&&/*#__PURE__*/_jsx(SearchError,{errorText:'Во время запроса произошла ошибка. Возможно, проблема с соединением или сервер недоступен. Подождите немного и попробуйте ещё раз'}),!isLoading&&!isReqErr&&!isNotFound&&/*#__PURE__*/_jsx(Fragment,{children:pathname==='/saved-movies'?/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"ul\",{className:\"cards__list\",children:cards.map(function(card){return/*#__PURE__*/_jsx(MoviesCard,{saved:getSavedMovieCard(savedMovies,card),cards:cards,card:card,isSavedFilms:isSavedFilms,handleLikeClick:handleLikeClick,onCardDelete:onCardDelete,savedMovies:savedMovies},isSavedFilms?card._id:card.id);})}),/*#__PURE__*/_jsx(\"div\",{className:\"cards__button-container\"})]}):/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"ul\",{className:\"cards__list\",children:cards.slice(0,shownMovies).map(function(card){return/*#__PURE__*/_jsx(MoviesCard,{saved:getSavedMovieCard(savedMovies,card),cards:cards,card:card,isSavedFilms:isSavedFilms,handleLikeClick:handleLikeClick,onCardDelete:onCardDelete,savedMovies:savedMovies},isSavedFilms?card._id:card.id);})}),/*#__PURE__*/_jsx(\"div\",{className:\"cards__button-container\",children:cards.length>shownMovies?/*#__PURE__*/_jsx(\"button\",{className:\"cards__button-more\",onClick:showMore,children:\"\\u0415\\u0449\\u0451\"}):''})]})})]});};export default MoviesCardList;","map":{"version":3,"names":["React","useEffect","useState","Preloader","Fragment","useLocation","MoviesCard","SearchError","MORE_MOVIES_DESKTOP","MORE_MOVIES_TABLET","MORE_MOVIES_MOBILE","jsx","_jsx","jsxs","_jsxs","MoviesCardList","_ref","cards","isSavedFilms","isLoading","isReqErr","isNotFound","handleLikeClick","savedMovies","onCardDelete","_useState","_useState2","_slicedToArray","shownMovies","setShownMovies","_useLocation","pathname","shownCount","display","window","innerWidth","setTimeout","addEventListener","showMore","getSavedMovieCard","card","find","savedMovie","movieId","id","className","children","errorText","map","saved","_id","slice","length","onClick"],"sources":["/Users/les/dev/movies-explorer-frontend/src/components/MoviesCardList/MoviesCardList.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport Preloader from \"../Preloader/Preloader\";\nimport {Fragment} from \"react\";\nimport { useLocation } from 'react-router-dom';\nimport MoviesCard from \"../MoviesCard/MoviesCard\";\nimport './MoviesCardList.css'\nimport SearchError from '../SearchError/SearchError';\nimport { MORE_MOVIES_DESKTOP, MORE_MOVIES_TABLET, MORE_MOVIES_MOBILE } from '../../utils/constants';\nconst MoviesCardList = ({cards, isSavedFilms, isLoading, isReqErr, isNotFound, handleLikeClick, savedMovies, onCardDelete}) => {\n   /* const isLoading = false;*/\n    const [shownMovies, setShownMovies] = useState(0);\n    const { pathname } = useLocation();\n\n    function shownCount() {\n        const display = window.innerWidth;\n        if (display > 1180) {\n            setShownMovies(16);\n        } else if (display > 1023) {\n            setShownMovies(12);\n        } else if (display > 800) {\n            setShownMovies(8);\n        } else if (display < 800) {\n            setShownMovies(5);\n        }\n    }\n\n    useEffect(() => {\n        shownCount();\n    }, []);\n\n    useEffect(() => {\n        setTimeout(() => {\n            window.addEventListener('resize', shownCount);\n        }, 500);\n    });\n\n    function showMore() {\n        const display = window.innerWidth;\n        if (display > 1180) {\n            setShownMovies(shownMovies + MORE_MOVIES_DESKTOP);\n        } else if (display > 1023) {\n            setShownMovies(shownMovies + MORE_MOVIES_TABLET);\n        }\n        else if (display < 1023) {\n            setShownMovies(shownMovies + MORE_MOVIES_MOBILE);\n        }\n    }\n\n    function getSavedMovieCard(savedMovies, card) {\n        return savedMovies.find((savedMovie) => savedMovie.movieId === card.id);\n    }\n\n    return(\n        <section className='cards'>\n            {isLoading && <Preloader />}\n            {isNotFound && !isLoading && <SearchError errorText={'Ничего не найдено'} />}\n            {isReqErr && !isLoading && (\n                <SearchError\n                    errorText={\n                        'Во время запроса произошла ошибка. Возможно, проблема с соединением или сервер недоступен. Подождите немного и попробуйте ещё раз'\n                    }\n                />\n            )}\n            {!isLoading && !isReqErr && !isNotFound && (\n                <Fragment>\n                    {pathname === '/saved-movies' ? (\n                <Fragment>\n                <ul className= 'cards__list'>\n                    {cards.map((card)=>(\n                        <MoviesCard key={isSavedFilms ? card._id : card.id}\n                                    saved={getSavedMovieCard(savedMovies, card)}\n                                    cards={cards}\n                                    card={card}\n                                    isSavedFilms={isSavedFilms}\n                                    handleLikeClick={handleLikeClick}\n                                    onCardDelete={onCardDelete}\n                                    savedMovies={savedMovies}/>\n                    ))}\n                </ul>\n                    <div className='cards__button-container'></div>\n                </Fragment>\n                    ) : (\n                        <Fragment>\n                            <ul className= 'cards__list'>\n                                {cards.slice(0, shownMovies).map((card) => (\n                                    <MoviesCard\n                                        key={isSavedFilms ? card._id : card.id}\n                                        saved={getSavedMovieCard(savedMovies, card)}\n                                        cards={cards}\n                                        card={card}\n                                        isSavedFilms={isSavedFilms}\n                                        handleLikeClick={handleLikeClick}\n                                        onCardDelete={onCardDelete}\n                                        savedMovies={savedMovies}\n                                    />\n                                ))}\n                            </ul>\n                        <div className='cards__button-container'>\n                            {cards.length > shownMovies ? ( <button className='cards__button-more' onClick={showMore}>Ещё</button>\n                            ) : (\n                            ''\n                            )}\n                </div>\n                </Fragment>\n                )}\n        </Fragment>\n    )}\n</section>\n);\n}\n\nexport default MoviesCardList\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}