{"ast":null,"code":"var _jsxFileName = \"/Users/les/dev/movies-explorer-frontend/src/components/Movies/Movies.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport Header from \"../Header/Header\";\nimport Footer from \"../Footer/Footer\";\nimport SearchForm from \"../SearchForm/SearchForm\";\nimport MoviesCardList from \"../MoviesCardList/MoviesCardList\";\nimport './Movies.css';\nimport { filterMovies, filterDuration } from '../../utils/utils';\nimport * as movies from '../../utils/MoviesApi';\n\n/*import movieImage from '../../images/card-saved.png';\n\nconst movies123 = [\n  { _id: 1, image: movieImage, title: '33 слова о дизайне', length: '1ч 42м', saved: true },\n  { _id: 2, image: movieImage, title: 'Киноальманах «100 лет дизайна»', length: '1ч 42м', saved: true },\n  { _id: 3, image: movieImage, title: 'В погоне за Бенкси', length: '1ч 42м', saved: false },\n  { _id: 4, image: movieImage, title: 'Баския: Взрыв реальности', length: '1ч 42м', saved: false },\n  { _id: 5, image: movieImage, title: 'Бег это свобода', length: '1ч 42м', saved: true },\n  { _id: 6, image: movieImage, title: 'Книготорговцы', length: '1ч 42м', saved: false },\n  { _id: 7, image: movieImage, title: 'Когда я думаю о Германии ночью', length: '1ч 42м', saved: false },\n];*/\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Movies = ({\n  loggedIn,\n  handleLikeClick,\n  savedMovies,\n  onCardDelete\n}) => {\n  _s();\n  const [isLoading, setIsLoading] = useState(false); //загрузка прелоадер\n  const [initialMovies, setInitialMovies] = useState([]); //отфильтрованные по запросу\n  const [filteredMovies, setFilteredMovies] = useState([]); //отфильтрованные по запросу и чекбоксу\n  const [isShortMovies, setIsShortMovies] = useState(false); //включен ли чекбокс короткометражек\n\n  const [isReqErr, setIsReqErr] = useState(false); //ошибка запроса к серверу\n  const [isNotFound, setIsNotFound] = useState(false); //фильмы по запросу не найдены\n  //основной метод фильрации, который отдает массив с фильмами на рендеринг\n  function handleFilterMovies(movies, query, short) {\n    const moviesList = filterMovies(movies, query, short); //фильтруем полученный массив по запросу\n    setInitialMovies(moviesList); //записываем в стейт\n    setFilteredMovies(short ? filterDuration(moviesList) : moviesList); //если чекбокс тру, то фильруем по длине и записываем в стейт\n    localStorage.setItem('movies', JSON.stringify(moviesList));\n    localStorage.setItem('allMovies', JSON.stringify(movies));\n  }\n  function handleShortMovies() {\n    setIsShortMovies(!isShortMovies);\n    if (!isShortMovies) {\n      if (filterDuration(initialMovies).length === 0) {\n        setFilteredMovies(filterDuration(initialMovies));\n        // setIsNotFound(true);\n      } else {\n        setFilteredMovies(filterDuration(initialMovies));\n        // setIsNotFound(false);\n      }\n    } else {\n      setFilteredMovies(initialMovies);\n      // setIsNotFound(initialMovies.length === 0 ? true : false);\n    }\n\n    localStorage.setItem('shortMovies', !isShortMovies);\n  }\n\n  //submit\n  function onSearchMovies(query) {\n    console.log(query);\n    localStorage.setItem('movieSearch', query);\n    localStorage.setItem('shortMovies', isShortMovies);\n    if (localStorage.getItem('allMovies')) {\n      const movies = JSON.parse(localStorage.getItem('allMovies'));\n      console.log('lo');\n      handleFilterMovies(movies, query, isShortMovies);\n    } else {\n      console.log('nolo');\n      setIsLoading(true);\n      movies.getCards().then(cardsData => {\n        handleFilterMovies(cardsData, query, isShortMovies);\n        setIsReqErr(false);\n        // setAllMovies(cardsData);\n      }).catch(err => {\n        setIsReqErr(true);\n        console.log(err);\n      }).finally(() => {\n        setIsLoading(false);\n      });\n    }\n  }\n  useEffect(() => {\n    if (localStorage.getItem('shortMovies') === 'true') {\n      setIsShortMovies(true);\n    } else {\n      setIsShortMovies(false);\n    }\n  }, []);\n  useEffect(() => {\n    if (localStorage.getItem('movies')) {\n      const movies = JSON.parse(localStorage.getItem('movies'));\n      setInitialMovies(movies);\n      if (localStorage.getItem('shortMovies') === 'true') {\n        setFilteredMovies(filterDuration(movies));\n      } else {\n        setFilteredMovies(movies);\n      }\n    } else {\n      // setIsNotFound(true);\n    }\n  }, []);\n  useEffect(() => {\n    if (localStorage.getItem('movieSearch')) {\n      if (filteredMovies.length === 0) {\n        setIsNotFound(true);\n      } else {\n        setIsNotFound(false);\n      }\n    } else {\n      setIsNotFound(false);\n    }\n  }, [filteredMovies]);\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"movies\",\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      loggedIn: loggedIn\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(SearchForm, {\n      onSearchMovies: onSearchMovies,\n      onFilter: handleShortMovies,\n      isShortMovies: isShortMovies\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(MoviesCardList, {\n      savedMovies: savedMovies,\n      cards: filteredMovies,\n      isSavedFilms: false,\n      isLoading: isLoading,\n      isReqErr: isReqErr,\n      isNotFound: isNotFound,\n      handleLikeClick: handleLikeClick,\n      onCardDelete: onCardDelete\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 122,\n    columnNumber: 9\n  }, this);\n};\n_s(Movies, \"XFIiqVbBZlpDMgRFjA60m0YDM5E=\");\n_c = Movies;\nexport default Movies;\nvar _c;\n$RefreshReg$(_c, \"Movies\");","map":{"version":3,"names":["React","useState","useEffect","Header","Footer","SearchForm","MoviesCardList","filterMovies","filterDuration","movies","jsxDEV","_jsxDEV","Movies","loggedIn","handleLikeClick","savedMovies","onCardDelete","_s","isLoading","setIsLoading","initialMovies","setInitialMovies","filteredMovies","setFilteredMovies","isShortMovies","setIsShortMovies","isReqErr","setIsReqErr","isNotFound","setIsNotFound","handleFilterMovies","query","short","moviesList","localStorage","setItem","JSON","stringify","handleShortMovies","length","onSearchMovies","console","log","getItem","parse","getCards","then","cardsData","catch","err","finally","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onFilter","cards","isSavedFilms","_c","$RefreshReg$"],"sources":["/Users/les/dev/movies-explorer-frontend/src/components/Movies/Movies.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Header from \"../Header/Header\";\nimport Footer from \"../Footer/Footer\";\nimport SearchForm from \"../SearchForm/SearchForm\";\nimport MoviesCardList from \"../MoviesCardList/MoviesCardList\";\nimport './Movies.css';\nimport { filterMovies, filterDuration } from '../../utils/utils';\n\nimport * as movies from '../../utils/MoviesApi';\n\n/*import movieImage from '../../images/card-saved.png';\n\nconst movies123 = [\n  { _id: 1, image: movieImage, title: '33 слова о дизайне', length: '1ч 42м', saved: true },\n  { _id: 2, image: movieImage, title: 'Киноальманах «100 лет дизайна»', length: '1ч 42м', saved: true },\n  { _id: 3, image: movieImage, title: 'В погоне за Бенкси', length: '1ч 42м', saved: false },\n  { _id: 4, image: movieImage, title: 'Баския: Взрыв реальности', length: '1ч 42м', saved: false },\n  { _id: 5, image: movieImage, title: 'Бег это свобода', length: '1ч 42м', saved: true },\n  { _id: 6, image: movieImage, title: 'Книготорговцы', length: '1ч 42м', saved: false },\n  { _id: 7, image: movieImage, title: 'Когда я думаю о Германии ночью', length: '1ч 42м', saved: false },\n];*/\n\nconst Movies = ({loggedIn, handleLikeClick, savedMovies, onCardDelete }) => {\n    const [isLoading, setIsLoading] = useState(false); //загрузка прелоадер\n    const [initialMovies, setInitialMovies] = useState([]); //отфильтрованные по запросу\n    const [filteredMovies, setFilteredMovies] = useState([]); //отфильтрованные по запросу и чекбоксу\n    const [isShortMovies, setIsShortMovies] = useState(false); //включен ли чекбокс короткометражек\n\n    const [isReqErr, setIsReqErr] = useState(false); //ошибка запроса к серверу\n    const [isNotFound, setIsNotFound] = useState(false); //фильмы по запросу не найдены\n    //основной метод фильрации, который отдает массив с фильмами на рендеринг\n    function handleFilterMovies(movies, query, short) {\n        const moviesList = filterMovies(movies, query, short); //фильтруем полученный массив по запросу\n        setInitialMovies(moviesList); //записываем в стейт\n        setFilteredMovies(short ? filterDuration(moviesList) : moviesList); //если чекбокс тру, то фильруем по длине и записываем в стейт\n        localStorage.setItem('movies', JSON.stringify(moviesList));\n        localStorage.setItem('allMovies', JSON.stringify(movies));\n    }\n\n    function handleShortMovies() {\n        setIsShortMovies(!isShortMovies);\n        if (!isShortMovies) {\n            if (filterDuration(initialMovies).length === 0) {\n                setFilteredMovies(filterDuration(initialMovies));\n                // setIsNotFound(true);\n            } else {\n                setFilteredMovies(filterDuration(initialMovies));\n                // setIsNotFound(false);\n            }\n        } else {\n            setFilteredMovies(initialMovies);\n            // setIsNotFound(initialMovies.length === 0 ? true : false);\n        }\n        localStorage.setItem('shortMovies', !isShortMovies);\n    }\n\n    //submit\n    function onSearchMovies(query) {\n        console.log(query);\n\n        localStorage.setItem('movieSearch', query);\n        localStorage.setItem('shortMovies', isShortMovies);\n\n        if (localStorage.getItem('allMovies')) {\n            const movies = JSON.parse(localStorage.getItem('allMovies'));\n            console.log('lo');\n            handleFilterMovies(movies, query, isShortMovies);\n        } else {\n            console.log('nolo');\n            setIsLoading(true);\n            movies\n                .getCards()\n                .then((cardsData) => {\n                    handleFilterMovies(cardsData, query, isShortMovies);\n                    setIsReqErr(false);\n                    // setAllMovies(cardsData);\n                })\n                .catch((err) => {\n                    setIsReqErr(true);\n                    console.log(err);\n                })\n                .finally(() => {\n                    setIsLoading(false);\n                });\n        }\n    }\n\n    useEffect(() => {\n        if (localStorage.getItem('shortMovies') === 'true') {\n            setIsShortMovies(true);\n        } else {\n            setIsShortMovies(false);\n        }\n    }, []);\n\n    useEffect(() => {\n        if (localStorage.getItem('movies')) {\n            const movies = JSON.parse(localStorage.getItem('movies'));\n            setInitialMovies(movies);\n            if (localStorage.getItem('shortMovies') === 'true') {\n                setFilteredMovies(filterDuration(movies));\n            } else {\n                setFilteredMovies(movies);\n            }\n        } else {\n            // setIsNotFound(true);\n        }\n    }, []);\n\n    useEffect(() => {\n        if (localStorage.getItem('movieSearch')) {\n            if (filteredMovies.length === 0) {\n                setIsNotFound(true);\n            } else {\n                setIsNotFound(false);\n            }\n        } else {\n            setIsNotFound(false);\n        }\n    }, [filteredMovies]);\n    return(\n        <section className='movies'>\n            <Header loggedIn={loggedIn} />\n            <SearchForm\n                onSearchMovies={onSearchMovies}\n                onFilter={handleShortMovies}\n                isShortMovies={isShortMovies}/>\n            <MoviesCardList\n                savedMovies={savedMovies}\n                cards={filteredMovies}\n                isSavedFilms={false}\n                isLoading={isLoading}\n                isReqErr={isReqErr}\n                isNotFound={isNotFound}\n                handleLikeClick={handleLikeClick}\n                onCardDelete={onCardDelete}/>\n            <Footer/>\n        </section>\n    )\n}\n\nexport default Movies"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}