{"ast":null,"code":"import _slicedToArray from\"/Users/les/dev/movies-explorer-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useContext,useState}from'react';import CurrentUserContext from'../../contexts/CurrentUserContext';import'./Profile.css';import Header from'../Header/Header';import useForm from'../hooks/useForm';import{EMAIL_REGEX,USERNAME_REGEX}from'../../utils/constants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Profile=function Profile(_ref){var signOut=_ref.signOut,onUpdateUser=_ref.onUpdateUser,loggedIn=_ref.loggedIn,isLoading=_ref.isLoading;var currentUser=useContext(CurrentUserContext);var _useForm=useForm(),enteredValues=_useForm.enteredValues,errors=_useForm.errors,handleChange=_useForm.handleChange,isFormValid=_useForm.isFormValid,resetForm=_useForm.resetForm;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLastValues=_useState2[0],setIsLastValues=_useState2[1];useEffect(function(){if(currentUser){resetForm(currentUser);}},[currentUser,resetForm]);function handleSubmit(e){e.preventDefault();onUpdateUser({name:enteredValues.name,email:enteredValues.email});}useEffect(function(){if(currentUser.name===enteredValues.name&&currentUser.email===enteredValues.email){setIsLastValues(true);}else{setIsLastValues(false);}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[enteredValues]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{loggedIn:loggedIn}),/*#__PURE__*/_jsxs(\"section\",{className:\"profile\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"profile__title\",children:[\"\\u041F\\u0440\\u0438\\u0432\\u0435\\u0442, \",currentUser.name,\"!\"]}),/*#__PURE__*/_jsxs(\"form\",{className:\"profile__form\",onSubmit:handleSubmit,noValidate:true,children:[/*#__PURE__*/_jsxs(\"label\",{className:\"profile__field\",children:[\"\\u0418\\u043C\\u044F\",/*#__PURE__*/_jsx(\"input\",{name:\"name\",className:\"profile__input\",id:\"name-input\",type:\"text\",minLength:\"2\",maxLength:\"40\",required:true,onChange:handleChange,value:enteredValues.name||'',pattern:USERNAME_REGEX}),/*#__PURE__*/_jsx(\"span\",{className:\"profile__input-error\",children:errors.name})]}),/*#__PURE__*/_jsx(\"div\",{className:\"profile__border\"}),/*#__PURE__*/_jsxs(\"label\",{className:\"profile__field\",children:[\"E-mail\",/*#__PURE__*/_jsx(\"input\",{name:\"email\",className:\"profile__input\",id:\"email-input\",type:\"email\",required:true,onChange:handleChange,pattern:EMAIL_REGEX,value:enteredValues.email||''}),/*#__PURE__*/_jsx(\"span\",{className:\"profile__input-error\",children:errors.email})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:!isFormValid?true:false,className:!isFormValid||isLoading||isLastValues?'profile__button-submit':'profile__button-submit profile__button-submit_inactive',children:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"profile__logout\",onClick:signOut,children:\"\\u0412\\u044B\\u0439\\u0442\\u0438 \\u0438\\u0437 \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442\\u0430\"})]})]})]});};export default Profile;","map":{"version":3,"names":["React","useEffect","useContext","useState","CurrentUserContext","Header","useForm","EMAIL_REGEX","USERNAME_REGEX","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Profile","_ref","signOut","onUpdateUser","loggedIn","isLoading","currentUser","_useForm","enteredValues","errors","handleChange","isFormValid","resetForm","_useState","_useState2","_slicedToArray","isLastValues","setIsLastValues","handleSubmit","e","preventDefault","name","email","children","className","onSubmit","noValidate","id","type","minLength","maxLength","required","onChange","value","pattern","disabled","onClick"],"sources":["/Users/les/dev/movies-explorer-frontend/src/components/Profile/Profile.js"],"sourcesContent":["import React, { useEffect, useContext, useState } from 'react';\nimport CurrentUserContext from '../../contexts/CurrentUserContext';\nimport './Profile.css'\nimport Header from '../Header/Header';\nimport useForm from '../hooks/useForm';\nimport { EMAIL_REGEX, USERNAME_REGEX } from '../../utils/constants';\nconst Profile = ({ signOut, onUpdateUser, loggedIn, isLoading }) =>{\n    const currentUser = useContext(CurrentUserContext);\n\n    const { enteredValues, errors, handleChange, isFormValid, resetForm } = useForm();\n    const [isLastValues, setIsLastValues] = useState(false);\n\n    useEffect(() => {\n        if (currentUser) {\n            resetForm(currentUser);\n        }\n    }, [currentUser, resetForm]);\n\n    function handleSubmit(e) {\n        e.preventDefault();\n        onUpdateUser({\n            name: enteredValues.name,\n            email: enteredValues.email,\n        });\n    }\n\n    useEffect(() => {\n        if (currentUser.name === enteredValues.name && currentUser.email === enteredValues.email) {\n            setIsLastValues(true);\n        } else {\n            setIsLastValues(false);\n        }\n\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [enteredValues]);\n    return(\n        <>\n            <Header loggedIn={loggedIn} />\n        <section className='profile'>\n            <h3 className='profile__title'>Привет, {currentUser.name}!</h3>\n            <form className='profile__form' onSubmit={handleSubmit} noValidate>\n                <label className='profile__field'>\n                    Имя\n                    <input\n                        name='name'\n                        className='profile__input'\n                        id='name-input'\n                        type='text'\n                        minLength='2'\n                        maxLength='40'\n                        required={true}\n                        onChange={handleChange}\n                        value={enteredValues.name || ''}\n                        pattern={USERNAME_REGEX}\n                    />\n                    <span className=\"profile__input-error\">{errors.name}</span>\n                </label>\n\n                <div className='profile__border'></div>\n                <label className='profile__field'>\n                    E-mail\n                    <input name='email'\n                           className='profile__input'\n                           id='email-input'\n                           type='email'\n                           required={true}\n                           onChange={handleChange}\n                           pattern={EMAIL_REGEX}\n                           value={enteredValues.email || ''}\n                    />\n                    <span className=\"profile__input-error\">{errors.email}</span>\n                </label>\n                <button type='submit'\n                        disabled={!isFormValid ? true : false}\n                        className={!isFormValid || isLoading || isLastValues\n                            ? 'profile__button-submit'\n                            :'profile__button-submit profile__button-submit_inactive' }\n                >\n                    Редактировать\n                </button>\n                <button type=\"button\" className='profile__logout' onClick={signOut}>Выйти из аккаунта</button>\n            </form>\n        </section>\n        </>\n    )\n}\n\nexport default Profile"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}